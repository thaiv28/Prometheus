<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <title>{{ metric.name }} Rankings</title>
    <link rel='stylesheet' href='{{ css_file }}'>
    <style>
      .filter-bar { margin-bottom: 1.5rem; }
      .filter-bar select { margin-right: 1rem; padding: 0.3rem; }
    </style>
</head>
<body>
<header>
    <h1>{{ metric.name }} Rankings</h1>
</header>
<main>
    <h2>Description</h2>
    <p>{{ metric.description }}</p>
    <div class="filter-bar">
      <label for="year">Year:</label>
      <select id="year" onchange="filterTable()">
        <option value="all">All</option>
        {% for y in years %}
        <option value="{{ y }}">{{ y }}</option>
        {% endfor %}
      </select>
      <label for="league">League:</label>
      <select id="league" onchange="filterTable()">
        <option value="all">All</option>
        {% for l in leagues %}
        <option value="{{ l }}">{{ l }}</option>
        {% endfor %}
      </select>
    </div>
    <table id="rankings-table" class="rankings-table">
      <thead>
        <tr>
          {% for col in columns %}
          <th>{{ col }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
        <tr data-year="{{ row.year }}" data-league="{{ row.league }}">
          {% for col in columns %}
          <td>{{ row[col] }}</td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <nav>
        <a href='index.html'>Back to Home</a>
    </nav>
</main>
<footer>
    <a href='index.html'>Home</a>
</footer>
<script>
function filterTable() {
  var year = document.getElementById('year').value;
  var league = document.getElementById('league').value;
  var rows = document.querySelectorAll('#rankings-table tbody tr');
  rows.forEach(function(row) {
    var show = true;
    if (year !== 'all' && row.getAttribute('data-year') !== year) show = false;
    if (league !== 'all' && row.getAttribute('data-league') !== league) show = false;
    row.style.display = show ? '' : 'none';
  });
}
</script>
</body>
</html>
